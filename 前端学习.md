# 前端学习

## TCP/IP

### TCP和UDP区别

|类型|特点|性能|应用场景|首部字节|
|--|--|--|--|--|
|TCP|面向连接，可靠传输，字节流|传输慢，所需性能高|要求通信可靠|20-60|
|UDP|面向无连接，不可靠传输，数据报|传输快，所需性能低|要求通信速度快|8|

### TCP/IP 4层模型

- 应用层
- 传输层
- 网络层
- 网络接口层

### TCP/IP 5层模型
- 应用层
- 传输层
- 网络层
- 数据链路层
- 物理层

### TCP/IP 7层模型
- 应用层
- 表示层
- 会话层
- 传输层
- 网络层
- 数据链路层
- 物理层

### HTTP长连接、短连接
在HTTP/1.0中默认使用短连接。也就是说，客户端和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。当客户端浏览器访问的某个HTML或其他类型的Web页中包含有其他的Web资源（如JavaScript文件、图像文件、CSS文件等），每遇到这样一个Web资源，浏览器就会重新建立一个HTTP会话。

而从HTTP/1.1起，默认使用长连接，用以保持连接特性。使用长连接的HTTP协议，会在响应头加入这行代码：

`Connection:keep-alive`

Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接需要客户端和服务端都支持长连接。

## 避免重定向

## 避免CSS表达式

## js放底部


## 样式放顶部
css并不会阻塞DOM树的解析。(看不到，但是js可以控制DOM)
css加载会阻塞DOM树渲染。(CSS加载完，才看到网页上的DOM)
css加载会阻塞后面js语句的执行

## 高性能网站建设
只有10%~20%的最终用户响应时间花在了下载HTML文档上，其余的80%~90%时间花在了下载页面中的所有组件上


### 使用内容发布网络
Content Delicery NetWorks (CND)

### 减少http请求
- 内联图片
- 合并js，css文件

## 低端浏览器兼容,移动端兼容

浏览器测试工具 IETest
### 去掉button点击篮色边框
```
outline: none;
```

### 什么是浏览器兼容问题

由于不同浏览器的内核不同，同一浏览器的不同版本对CSS的支持及解析结果不一样，因此渲染的效果也不相同。

### 需注意的问题

1. 写好标准头： <!DOCTYPE html>
2. 首先引入初始化css，保证消除不同浏览器默认样式
3. PC端H5新标签尽量不用，比如header，footer，nav等
4. 不使用css选择器nth-of-type
5. jquery只有1.x版本兼容ie678，目前官方只做bug维护，不再增加新功能，最终版本是jquery1.12.4

###  解决方式

让低版本兼容h5标签引入html5shiv.js，让低版本兼容媒体查询引入respond.js

```
 <script src="scripts/respond/html5shiv.min.js"></script>
 <script src="scripts/respond/respond.min.js"></script>
```

让低版本兼容css3的box-sizing标签引入boxsizing.htc,只需在css代码box-sizing标签下边引入文件的当前路径即可

```
 box-sizing: border-box;
 *behavior: url(./scripts/box-sizing-polyfill/boxsizing.htc);
```

让低版本ie8兼容border-radius标签引入ie-css3.htc

```
-moz-border-radius: 1px;
-webkit-border-radius: 1px;
border-radius: 1px;
behavior: url(./scripts/ie-css3.htc/ie-css3.htc);
```

### CSS hack方式

#### CSS属性前缀法

```
.hack{
    color: sliver 所有浏览器
    color: sliver !important 除IE6以外
    *color: sliver IE6,7
    +color: sliver IE6,7
    _color: sliver IE6
    color: sliver\9 IE6,7,8,9,10
    color: sliver\0 IE8,9,10
    color: sliver\9\0 IE9,10
}
```
Trident内核：主要代表为IE浏览器，前缀为-ms
Gecko内核：主要代表为Firefox，前缀为-moz
Presto内核：主要代表为Opera，前缀为-o
Webkit内核：产要代表为Chrome和Safari，前缀为-webkit

#### 选择器前缀法
在CSS选择器前加一些只有某些特定浏览器才能识别的前缀进行hack

```
*html
+html
```


#### IE条件注释法
```
<!--[if IE]>
    <p>自由IE浏览器识别</p>
<![endif]-->
```

#### 常见问题

#### 背景透明问题
```
IE: filter: alpha(opacity=10);                                            
FF: -moz-opacity:0.10;                    
.box{filter:alpha(opacity=50);-moz-opacity:0.5; opacity:0.5;}
```
##### 图片默认有间距
```
 问题症状：
 几个img标签放一起时，有些浏览器会有默认间距，加通配符也不起作用。
 解决方案：使用float属性为img布局  
```
##### IE浮动 margin产生双边距

```
.box {              
float:left;     
width:100px;           
margin:0 0 0 100px;  //这种情况之下IE会产生200px距离
display:inline; //使浮动忽略 
}
```

##### Margin不一致问题：
当有多张图片需排在一行时，通常使用“Float：Left”来实现，这样一来，浏览器就存在兼容性问题。导致图片与后面的内容存在margin不一致问题。对此解决方法就是给图片添加“Display：inline”项即可。

### 判断移动端还是PC端

```
function browserRedirect() {
    var ua= navigator.userAgent.toLowerCase();
    var ipad= ua.match(/ipad/i) == "ipad";
    var iphone= ua.match(/iphone os/i) == "iphone os";
    var mid= ua.match(/midp/i) == "midp";
//midp，即Mobile Internet Device pad，一种新的“比智能电话大，比笔记本小”的互联网终端。
    var uc7= ua.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
    var uc= ua.match(/ucweb/i) == "ucweb";
    var android= ua.match(/android/i) == "android";
    var ce= ua.match(/windows ce/i) == "windows ce";
    var mobile= ua.match(/windows mobile/i) == "windows mobile";
    if (ipad|| iphone|| mid|| uc7|| uc || android|| ce|| mobile) {
    //跳转移动端页面
    window.location.href="http://www.wanshaobo.com/mobile/index.html";
    } else {
    //跳转pc端页面
    window.location.href="http://www.wanshaobo.com/index.html";
    }
}
```